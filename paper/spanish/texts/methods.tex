\section{Método}

La especificación de FHIR define diferentes categorías de tipos de datos. Entre los cuales, se encuentra los tipos de datos primitivos que permiten un solo valor de un dominio de valores definidos por cada tipo \cite{FHIRDataTypes}. Las demás categorías son tipos de datos complejos que utilizan a los tipos de datos primitivos para su definición.

Dentro de las especificaciones de openEHR se definen sus tipos de datos como clases de su Modelo de Referencia. Entre estas clases, se encuentra la clase DATA\_VALUE que sirve como antecesora común de todos los tipos de valores de datos en los modelos openEHR, y las clases que heredan de la misma se caracterizan por tener un atributo que almacena los tipos de datos primitivos estándares \cite{openEHRDataTypes}.

Se propone encontrar equivalencias entre los tipos de datos primitivos de FHIR y las clases que extiende de DATA\_VALUE de openEHR. Una equivalencia existe si se cumplen las condiciones de: 1) el dominio de valores de un tipo de dato primitivo de FHIR puede ser almacenado dentro de uno de los atributos de una de las clases que extiende de la clase DATA\_VALUE de openEHR, 2) se conserva el uso de la clase de openEHR para el cual fue diseñado.

Como ejemplo, si se considera el tipo primitivo de FHIR boolean y la clase DV\_BOOLEAN de openEHR se observa que: 1) los valores true, false del tipo boolean pueden ser contenidos dentro del atributo value de la clase DV\_BOOLEAN de openEHR, 2) el uso de la clase DV\_BOOLEAN, la cual especifica que la clase se usa para elementos que son datos verdaderamente booleanos se conserva. Se puede verificar, que las condiciones de equivalencia se cumplen, y, por lo tanto, según lo propuesto por este trabajo el tipo primitivo boolean de FHIR y la clase DV\_BOOLEAN de openEHR son equivalentes.

Las equivalencias encontradas se usarán para la creación de arquetipos que modelen los datos en los repositorios openEHR de recursos FHIR intercambiados.

Una forma de crear los arquetipos de recursos FHIR es modelar la misma estructura de los recursos usando las equivalencias de tipos dentro de algún editor de arquetipos disponibles \cite{openEHRModellingTools}. Los principales inconvenientes de la creación manual son la lentitud y un mayor riesgo de introducir errores por factor humano. Una alternativa diferente es la propuesta en este trabajo, consistente en la creación a través de un proceso automatizado de 3 etapas: abstracción, sustitución y definición, las cuales se realizan por cada arquetipo openEHR de recurso FHIR a crearse. La figura \ref{fig:solution} ilustra el proceso automatizado propuesto.

\begin{figure}
  \includegraphics[scale=0.5]{./images/solution}
  \caption{Proceso automatizado}
  \label{fig:solution}
\end{figure}

\input{./texts/abstraction.tex}

\input{./texts/substitution.tex}

\input{./texts/definition.tex}
